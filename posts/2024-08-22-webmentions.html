<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Using Webmentions with GitHub Actions | buzl.uk</title>
    <meta name="description" content="My personal website">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.tfN3qeCl.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.CwDt6GQk.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.D7fRY2ux.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CLEca2LO.js">
    <link rel="modulepreload" href="/assets/posts_2024-08-22-webmentions.md.0l0nZ15V.lean.js">
    <link rel="icon" href="/favicon.svg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/favicon.svg" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>buzl.uk</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Blog</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/gallery.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Gallery</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/now.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Now</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/links.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Links</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/kaangiray26" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/kaangiray26" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _posts_2024-08-22-webmentions" data-v-39a288b8><div><h1 id="frontmatter-title" tabindex="-1">Using Webmentions with GitHub Actions <a class="header-anchor" href="#frontmatter-title" aria-label="Permalink to &quot;{{ $frontmatter.title }}&quot;">â€‹</a></h1><p>ðŸ“… August 22, 2024</p><p>Testing webmentions for the first time. This post will send a webmention to <a href="https://www.buzl.uk/2024/08/21/pyright.html" target="_blank" rel="noreferrer">another post</a> on my blog. Let&#39;s see if it works.</p><p><strong>Edit:</strong> It worked! I can see the webmention on my other post. Okay, let&#39;s go over how I set this up and how you can do it too.</p><h2 id="first-what-are-webmentions" tabindex="-1">First, what are webmentions? <a class="header-anchor" href="#first-what-are-webmentions" aria-label="Permalink to &quot;First, what are webmentions?&quot;">â€‹</a></h2><p>Webmention is another web standard recommendation from <a href="https://www.w3.org/TR/webmention/" target="_blank" rel="noreferrer">W3C</a>, that was written by the <a href="https://indieweb.org/Webmention" target="_blank" rel="noreferrer">IndieWeb</a> community. Basically, it describes a way for website owners to notify each other when they link each other&#39;s content on their posts. With Webmention, you can leave comments, likes, reposts, and other interactions on other people&#39;s websites, especially if you use <a href="https://indieweb.org/microformats" target="_blank" rel="noreferrer">microformats</a> with it.</p><p>I first learned about it on <a href="https://jamesg.blog/2024/02/19/personal-website-ideas/" target="_blank" rel="noreferrer">James&#39; Blog</a> and thought it was a pretty new thing. But it turns out, it&#39;s been around since 2016. I guess I&#39;m late to the party.</p><p>There are two sides to webmentions: receiving and sending. Let&#39;s start with the easier one.</p><h2 id="part-1-receiving" tabindex="-1">Part 1: Receiving <a class="header-anchor" href="#part-1-receiving" aria-label="Permalink to &quot;Part 1: Receiving&quot;">â€‹</a></h2><p>Notifications are simple HTTP requests. For that reason, we need a server that listens for incoming pings. I&#39;m using a popular choice called <a href="https://webmention.io/" target="_blank" rel="noreferrer">Webmention.io</a>, created by <a href="https://aaronparecki.com/" target="_blank" rel="noreferrer">Aaron Parecki</a>. It&#39;s one of those precious services that are free and open-source on the web. To set it up, you just create an account on the website, add your domain, and put a link tag on your website&#39;s head section. This is the one I have on my blog:</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;webmention&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://webmention.io/www.buzl.uk/webmention&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre></div><p>With this tag, other websites can recognize that we accept webmentions. Showing them on your page is also very easy. I have a little script located at <a href="/assets/scripts/webmentions.js">webmentions.js</a> that fetches the webmentions from the service based on the URL of the post you&#39;re viewing as the target. Then, it adds them to the page as a list and shows them in the DOM. If there are no webmentions, the webmentions section is hidden.</p><h2 id="part-2-sending" tabindex="-1">Part 2: Sending <a class="header-anchor" href="#part-2-sending" aria-label="Permalink to &quot;Part 2: Sending&quot;">â€‹</a></h2><p>Sending webmentions manually is a bit tiresome. When you publish a post with links, for each link, you have to check if they support webmentions, and then send a request to their webmention endpoint containing the <code>source</code> and <code>target</code> URLs. Some people use services like <a href="https://webmention.app/" target="_blank" rel="noreferrer">Webmention.app</a> to automate this process, but I wanted to do it myself.</p><p>A little bit background about my blog: I use Jekyll as my static site generator, and I host it on GitHub Pages. For the build process, I just use the default GitHub Actions workflow that is recommended by Jekyll. With this setup, I just push some changes and the site is build and deployed automatically.</p><p>Now, with GitHub Actions, we can try to automate the webmention sending process. All we have to do is to collect all links from my posts, check the target URLs and find out if they support webmentions, and then send a request to their webmention endpoint. For this, we first take the <code>sitemap.xml</code> file that is generated by Jekyll and extract all the post URLs from it. These are the URLs of our blog posts. Then, we load each URL and extract all the links from the post.</p><p>However, we also need to save the webmentions we sent to avoid processing the same URL multiple times in future runs. For this, after the end of the workflow, we save the URLs as a JSON file as an asset by releasing a new release. We also save the domains that don&#39;t support webmentions to avoid checking them again. This way, we save the state of the workflow and don&#39;t have to check the same URLs again.</p><p>For the actual processing part, we have a Python script that does the job. I&#39;m not going to go into the details but it just makes some HTTP requests and parses the HTML with <a href="https://lxml.de/" target="_blank" rel="noreferrer">lxml</a>. It&#39;s not perfect but it does the job for now.</p><p>I&#39;ve added the files to a new repository, which you can check out <a href="https://github.com/kaangiray26/webmention" target="_blank" rel="noreferrer">here</a> if you want to adapt it to your own blog. My blog&#39;s source code is also available <a href="https://github.com/kaangiray26/buzl.uk" target="_blank" rel="noreferrer">here</a> if you want to see how I implemented the parts I mentioned above and below.</p><p>If you want to use this setup, here are the steps you need to follow:</p><ol><li>Create an account on Webmention.io and add your domain.</li><li>Add the link tag to your website&#39;s head section.</li><li>Have a <code>sitemap.xml</code> file on your website.</li><li>Add a <code>TOKEN</code> secret to your repository with your GitHub token.</li><li>Add the GitHub Actions <a href="https://github.com/kaangiray26/webmention/blob/main/main.yml" target="_blank" rel="noreferrer">workflow</a> to your repository. You don&#39;t have to change anything in it.</li><li>Deploy your website to trigger the workflow.</li></ol><p>That&#39;s it! You should now be able to send webmentions automatically with GitHub Actions. If you have any questions, feel free to ask me, or send me a webmention. I&#39;d love to see if it works for you too.</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0 License</a>.</p><p class="copyright" data-v-e315a0ad>Copyright Â© 2025 Kaan Giray Buzluk</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"blog_index.md\":\"vQrgK_Dk\",\"gallery_index.md\":\"D0l5RvVY\",\"index.md\":\"BdaFrjyy\",\"links.md\":\"CHP6pOrj\",\"now.md\":\"DfhL_w7Y\",\"posts_2024-08-03-duckdb.md\":\"B-RnhO8h\",\"posts_2024-08-04-migration.md\":\"LAT_gt1W\",\"posts_2024-08-05-maps.md\":\"Cky2Dlu2\",\"posts_2024-08-20-progrock.md\":\"B-4a6Lsb\",\"posts_2024-08-21-pyright.md\":\"BrOVJNbK\",\"posts_2024-08-22-webmentions.md\":\"0l0nZ15V\",\"posts_2024-08-23-jekyll.md\":\"SDZrgdft\",\"posts_2024-08-24-reddit.md\":\"DtUTx5b5\",\"posts_2024-08-25-earbuds.md\":\"BbrgST9c\",\"posts_2024-08-31-positron.md\":\"BhbGDSVB\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"buzl.uk\",\"description\":\"My personal website\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/favicon.svg\",\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Blog\",\"link\":\"/blog\"},{\"text\":\"Gallery\",\"link\":\"/gallery\"},{\"text\":\"Now\",\"link\":\"/now\"},{\"text\":\"Links\",\"link\":\"/links\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/kaangiray26\"}],\"footer\":{\"message\":\"Licensed under the <a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\">CC BY-NC-SA 4.0 License</a>.\",\"copyright\":\"Copyright Â© 2025 Kaan Giray Buzluk\"},\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>