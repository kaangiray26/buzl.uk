<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=5"
        />
        <title>A Naive Routing</title>
        <link rel="canonical" href="https://www.buzl.uk/" />
        <!-- If you're wondering about what buzluk means, it's just my surname and it literally means "freezer" in Turkish, lol. -->
        <meta name="title" content="buzl.uk" />
        <meta
            name="description"
            content="kaangiray26's blog about software development, technology, qualities in life and more"
        />

        <meta property="og:site_name" content="buzl.uk" />
        <meta property="og:title" content="buzl.uk" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.buzl.uk/" />
        <meta
            property="og:description"
            content="kaangiray26's blog about software development, technology, qualities in life and more"
        />
        <meta
            property="og:image"
            content="https://kaangiray26.github.io/images/buzluk.png"
        />

        <meta property="twitter:card" content="summary" />
        <meta property="twitter:url" content="https://www.buzl.uk/" />
        <meta property="twitter:title" content="Buzl.uk" />
        <meta
            property="twitter:description"
            content="kaangiray26's personal website"
        />
        <meta
            property="twitter:image"
            content="https://kaangiray26.github.io/images/buzluk.png"
        />
        <!-- The icon I ripped from the internet. I'm sorry. -->
        <link
            rel="shortcut icon"
            type="image/svg+xml"
            href="/assets/favicon.svg"
        />
        <link rel="stylesheet" href="/assets/restyle.css" />
        <!-- A RSS feed of course! -->
        <link
            rel="alternate"
            type="application/rss+xml"
            href="https://www.buzl.uk/feed.xml"
            title="buzl.uk"
        />
        <!-- These are my social profiles: -->
        <link href="https://github.com/kaangiray26" rel="me" />
        <link href="https://mastodon.social/@kaangiray26" rel="me" />
        <!-- This is for webmentions: -->
        <link
            rel="webmention"
            href="https://webmention.io/www.buzl.uk/webmention"
        />
        <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>A Naive Routing | buzl.uk</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="A Naive Routing" />
<meta name="author" content="kaangiray26" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Warning: This page includes interactive examples. If you hate having fun, please close the tab immediately." />
<meta property="og:description" content="Warning: This page includes interactive examples. If you hate having fun, please close the tab immediately." />
<link rel="canonical" href="https://www.buzl.uk/2024/08/18/routing.html" />
<meta property="og:url" content="https://www.buzl.uk/2024/08/18/routing.html" />
<meta property="og:site_name" content="buzl.uk" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-08-18T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="A Naive Routing" />
<meta name="twitter:site" content="@kaangiray26" />
<meta name="twitter:creator" content="@kaangiray26" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"kaangiray26"},"dateModified":"2024-08-18T00:00:00+02:00","datePublished":"2024-08-18T00:00:00+02:00","description":"Warning: This page includes interactive examples. If you hate having fun, please close the tab immediately.","headline":"A Naive Routing","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.buzl.uk/2024/08/18/routing.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://www.buzl.uk/assets/favicon.svg"},"name":"kaangiray26"},"url":"https://www.buzl.uk/2024/08/18/routing.html"}</script>
<!-- End Jekyll SEO tag -->

    </head>

    <body>
        <header>
    <div class="frontmatter">
        <a href="/">
            <img src="/assets/favicon.svg" />
            <h1>buzl.uk</h1>
        </a>
    </div>
    <nav>
        <a href="/">Home</a>
        <a href="/blog/">Blog</a>
        <a href="/gallery">Gallery</a>
        <a href="/contact">Contact</a>
        <a href="/now">Now</a>
        <a href="/links">Links</a>
        <kbd>Alt 1-6</kbd>
    </nav>
    <search>
        <form action="/search.html" method="get">
            <kbd>Ctrl K</kbd>
            <input
                type="search"
                name="q"
                placeholder="Type something to search..."
                autocomplete="off"
            />
            <button type="submit">Search</button>
        </form>
    </search>
</header>
<script type="module">
window.addEventListener("load", () => {
    // Add keyboard shortcuts
    document.onkeydown = (e) => {
        // Ctrl + K to focus on search input
        if (e.ctrlKey && e.key === "k") {
            e.preventDefault();
            document.querySelector("input[type=search]").focus();
            return;
        }

        // Alt + 1 to go to home
        if (e.altKey && e.key === "1") {
            e.preventDefault();
            window.location.href = "/";
            return;
        }

        // Alt + 2 to go to blog
        if (e.altKey && e.key === "2") {
            e.preventDefault();
            window.location.href = "/blog";
            return;
        }

        // Alt + 3 to go to gallery
        if (e.altKey && e.key === "3") {
            e.preventDefault();
            window.location.href = "/gallery";
            return;
        }

        // Alt + 4 to go to contact
        if (e.altKey && e.key === "4") {
            e.preventDefault();
            window.location.href = "/contact";
            return;
        }

        // Alt + 5 to go to now
        if (e.altKey && e.key === "5") {
            e.preventDefault();
            window.location.href = "/now";
            return;
        }

        // Alt + 6 to go to links
        if (e.altKey && e.key === "6") {
            e.preventDefault();
            window.location.href = "/links";
            return;
        }
    };

    // Check current page and add active class to the corresponding link
    const currentPath = window.location.pathname;
    for (const link of document.querySelectorAll("nav a")) {
        if (link.getAttribute("href") === currentPath) {
            link.classList.add("active");
            break;
        }
    }
});
</script>
        <main><script defer src="/assets/scripts/post.js"></script>
<style>
    main img{
        cursor: pointer;
    }

    main img:hover{
        filter: brightness(0.9);
    }

    dialog img{
        width: 100%;
        height: auto;
        filter: none !important;
    }
</style>

<h1 class="post-title">A Naive Routing</h1>
<p></p>

<!-- Meta -->
<div class="post-author">
    <img src="/assets/spaghetti.webp" />
    <div>
        <p>
            <span>By kaangiray26</span>
        </p>
        <p>
            <time datetime="2024-08-18T00:00:00+02:00">
                Aug 18, 2024
            </time>
        </p>
    </div>
</div>

<!-- Divider -->
<hr />

<!-- Content -->
<p><mark>Warning:</mark> This page includes interactive examples. If you hate having fun, please close the tab immediately.</p>

<p>I really love Vue.js, I really do. But sometimes, I just want to use the good old HTML tags alone with little to no JavaScript. Simplicity is best heard when there is chaos around. So, long story short, I am forcing myself for little projects to use <a href="https://flask.palletsprojects.com/en/3.0.x/">Flask</a> and its little brother <a href="https://quart.palletsprojects.com/en/latest/">Quart</a>, so that I can take a break from the things I got used to and discover some new patterns. And I’ve decided to make a <a href="https://github.com/kaangiray26/mezzo">music player</a> with it.</p>

<p>But as you may already see, there is a problem with the tools I’ve chosen. Building a music player with Flask is not a problem, but without the routing, the media playback gets interrupted when the user navigates to another page. So, on a page change, we need to control what is changing on the page and what is not. That’s today’s problem, at least for me, before coffee and breakfast.</p>

<p>My intuition says that I need to create a custom tag for the HTML, which will be the container for the dynamic content. All other elements besides this tag will be static. And then, when the user clicks on a link, we will take the target URL, fetch the HTML content, and load them inside the custom tag. This way, we will keep the music player alive while the user can navigate to other pages. Let’s call it <code class="language-plaintext highlighter-rouge">&lt;router-view&gt;&lt;/router-view&gt;</code> like Vue.js and see how my Bauchgefühl works out in the end.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;router-view&gt;&lt;/router-view&gt;</span>
</code></pre></div></div>

<p>Now, let’s create a simple link with a click event that will trigger the fetching and loading of the content. The <code class="language-plaintext highlighter-rouge">href</code> attribute will hold the target URL as usual, and the <code class="language-plaintext highlighter-rouge">onclick</code> attribute will call the JavaScript function that we will define in a moment.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/assets/html/example.html"</span> <span class="na">onclick=</span><span class="s">"to(this)"</span><span class="nt">&gt;</span>Example page<span class="nt">&lt;/a&gt;</span>
</code></pre></div></div>

<p>And here is the JavaScript function that will handle the fetching and loading of the content. The function will prevent the default behavior of the link, get the URL, fetch the content of the target URL, and load it inside the <code class="language-plaintext highlighter-rouge">&lt;router-view&gt;&lt;/router-view&gt;</code> tag.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>async function to(el){
    event.preventDefault();
    const route = el.getAttribute('to');
    const html = await fetch(route).then(res =&gt; res.text());
    document.querySelector('router-view').innerHTML = html;
}
</code></pre></div></div>

<p>Want to see it in action?</p>

<section>
<div style="margin-bottom:1rem;">
    <a href="/assets/html/example.html" onclick="to(this)">home</a>
    <a href="/assets/html/contact.html" onclick="to(this)">contact</a>
</div>
<router-view>
    <h3>hello</h3>
    <p>Welcome to the home page of this example!</p>
    <p>Play the audio below and navigate to the about page, please.</p>
</router-view>
<audio controls="">
    <source src="/assets/audio/example.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
</audio>
<p>
    <button onclick="clear_router_view()">Destroy</button>
</p>
</section>

<p>What’s next? One thing that we can do is to use this in a Flask application and achieve something similar to server-side rendering. However, the idea is the same and I’m sure you can come up with a better solution. This is just a naive routing example that I wanted to share with you. I hope you enjoyed it as much as I did.</p>

<p>Tell no one but I’m actually using this in my music player project. I’m not proud of it, but it works. And that’s what matters in the end, right?</p>

<script>
async function to(el){
    event.preventDefault();
    const route = el.getAttribute('href');
    const html = await fetch(route).then(res => res.text());
    document.querySelector('router-view').innerHTML = html;
}

async function clear_router_view(){
    document.querySelector('router-view').innerHTML = '';
}
</script>



<!-- Postscript -->

<div>
    <strong>P.S.</strong>
    <p>reinvent the wheel, harden the steel, no matter what you feel.</p>
</div>


<!-- Image dialog -->
<dialog id="image-dialog" onclick="this.close()">
    <img src="" alt="" />
</dialog>
<webmentions>
    <h3>Webmentions</h3>
</webmentions>
<script src="/assets/scripts/webmentions.js"></script>
</main>
        <footer>
    <a href="feed.xml">RSS</a>
    <p>
        Licensed under the
        <a
            target="_blank"
            href="https://creativecommons.org/licenses/by-nc-sa/4.0/"
            >CC BY-NC-SA 4.0 License</a
        >.
    </p>
    <p>Copyright © <time id="date"></time> Kaan Giray Buzluk</p>
    <img src="/assets/lf1B0.gif" class="mate" />
</footer>

<script type="module">
    window.addEventListener("load", async () => {
        const date = new Date().getFullYear();
        document.getElementById("date").textContent = date;
    });
</script>

    </body>
</html>
